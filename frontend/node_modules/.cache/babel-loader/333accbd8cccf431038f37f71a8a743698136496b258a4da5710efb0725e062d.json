{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ClientSSLSecurityPFX = void 0;\nconst fs = require(\"fs\");\nconst https = require(\"https\");\nconst _ = require(\"lodash\");\n/**\n * activates SSL for an already existing client using a PFX cert\n *\n * @module ClientSSLSecurityPFX\n * @param {Buffer|String}   pfx\n * @param {String}   passphrase\n * @constructor\n */\nclass ClientSSLSecurityPFX {\n  constructor(pfx, passphrase, defaults) {\n    if (typeof passphrase === 'object') {\n      defaults = passphrase;\n    }\n    if (pfx) {\n      if (Buffer.isBuffer(pfx)) {\n        this.pfx = pfx;\n      } else if (typeof pfx === 'string') {\n        this.pfx = fs.readFileSync(pfx);\n      } else {\n        throw new Error('supplied pfx file should be a buffer or a file location');\n      }\n    }\n    if (passphrase) {\n      if (typeof passphrase === 'string') {\n        this.passphrase = passphrase;\n      }\n    }\n    this.defaults = {};\n    _.merge(this.defaults, defaults);\n  }\n  toXML() {\n    return '';\n  }\n  addOptions(options) {\n    options.pfx = this.pfx;\n    if (this.passphrase) {\n      options.passphrase = this.passphrase;\n    }\n    _.merge(options, this.defaults);\n    options.httpsAgent = new https.Agent(options);\n  }\n}\nexports.ClientSSLSecurityPFX = ClientSSLSecurityPFX;","map":{"version":3,"names":["fs","require","https","_","ClientSSLSecurityPFX","constructor","pfx","passphrase","defaults","Buffer","isBuffer","readFileSync","Error","merge","toXML","addOptions","options","httpsAgent","Agent","exports"],"sources":["../../src/security/ClientSSLSecurityPFX.ts"],"sourcesContent":[null],"mappings":";;;;;;AACA,MAAAA,EAAA,GAAAC,OAAA;AACA,MAAAC,KAAA,GAAAD,OAAA;AACA,MAAAE,CAAA,GAAAF,OAAA;AAGA;;;;;;;;AAQA,MAAaG,oBAAoB;EAO/BC,YAAYC,GAAoB,EAAEC,UAAkB,EAAEC,QAAc;IAClE,IAAI,OAAOD,UAAU,KAAK,QAAQ,EAAE;MAClCC,QAAQ,GAAGD,UAAU;;IAEvB,IAAID,GAAG,EAAE;MACP,IAAIG,MAAM,CAACC,QAAQ,CAACJ,GAAG,CAAC,EAAE;QACxB,IAAI,CAACA,GAAG,GAAGA,GAAG;OACf,MAAM,IAAI,OAAOA,GAAG,KAAK,QAAQ,EAAE;QAClC,IAAI,CAACA,GAAG,GAAGN,EAAE,CAACW,YAAY,CAACL,GAAG,CAAC;OAChC,MAAM;QACL,MAAM,IAAIM,KAAK,CAAC,yDAAyD,CAAC;;;IAI9E,IAAIL,UAAU,EAAE;MACd,IAAI,OAAOA,UAAU,KAAK,QAAQ,EAAE;QAClC,IAAI,CAACA,UAAU,GAAGA,UAAU;;;IAGhC,IAAI,CAACC,QAAQ,GAAG,EAAE;IAClBL,CAAC,CAACU,KAAK,CAAC,IAAI,CAACL,QAAQ,EAAEA,QAAQ,CAAC;EAClC;EAEOM,KAAKA,CAAA;IACV,OAAO,EAAE;EACX;EAEOC,UAAUA,CAACC,OAAY;IAC5BA,OAAO,CAACV,GAAG,GAAG,IAAI,CAACA,GAAG;IACtB,IAAI,IAAI,CAACC,UAAU,EAAE;MACnBS,OAAO,CAACT,UAAU,GAAG,IAAI,CAACA,UAAU;;IAEtCJ,CAAC,CAACU,KAAK,CAACG,OAAO,EAAE,IAAI,CAACR,QAAQ,CAAC;IAC/BQ,OAAO,CAACC,UAAU,GAAG,IAAIf,KAAK,CAACgB,KAAK,CAACF,OAAO,CAAC;EAC/C;;AAzCFG,OAAA,CAAAf,oBAAA,GAAAA,oBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}