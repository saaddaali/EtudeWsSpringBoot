{"ast":null,"code":"\"use strict\";\n\n/*\n * Copyright (c) 2011 Vinay Pulim <vinay@milewise.com>\n * MIT Licensed\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Client = void 0;\nconst assert = require(\"assert\");\nconst crypto_1 = require(\"crypto\");\nconst debug_1 = require(\"debug\");\nconst events_1 = require(\"events\");\nconst getStream = require(\"get-stream\");\nconst _ = require(\"lodash\");\nconst http_1 = require(\"./http\");\nconst utils_1 = require(\"./utils\");\nconst debug = (0, debug_1.default)('node-soap');\nconst nonIdentifierChars = /[^a-z$_0-9]/i;\nclass Client extends events_1.EventEmitter {\n  constructor(wsdl, endpoint, options) {\n    super();\n    options = options || {};\n    this.wsdl = wsdl;\n    this._initializeOptions(options);\n    this._initializeServices(endpoint);\n    this.httpClient = options.httpClient || new http_1.HttpClient(options);\n  }\n  /** add soapHeader to soap:Header node */\n  addSoapHeader(soapHeader, name, namespace, xmlns) {\n    if (!this.soapHeaders) {\n      this.soapHeaders = [];\n    }\n    soapHeader = this._processSoapHeader(soapHeader, name, namespace, xmlns);\n    return this.soapHeaders.push(soapHeader) - 1;\n  }\n  changeSoapHeader(index, soapHeader, name, namespace, xmlns) {\n    if (!this.soapHeaders) {\n      this.soapHeaders = [];\n    }\n    soapHeader = this._processSoapHeader(soapHeader, name, namespace, xmlns);\n    this.soapHeaders[index] = soapHeader;\n  }\n  /** return all defined headers */\n  getSoapHeaders() {\n    return this.soapHeaders;\n  }\n  /** remove all defined headers */\n  clearSoapHeaders() {\n    this.soapHeaders = null;\n  }\n  addHttpHeader(name, value) {\n    if (!this.httpHeaders) {\n      this.httpHeaders = {};\n    }\n    this.httpHeaders[name] = value;\n  }\n  getHttpHeaders() {\n    return this.httpHeaders;\n  }\n  clearHttpHeaders() {\n    this.httpHeaders = null;\n  }\n  addBodyAttribute(bodyAttribute, name, namespace, xmlns) {\n    if (!this.bodyAttributes) {\n      this.bodyAttributes = [];\n    }\n    if (typeof bodyAttribute === 'object') {\n      let composition = '';\n      Object.getOwnPropertyNames(bodyAttribute).forEach((prop, idx, array) => {\n        composition += ' ' + prop + '=\"' + bodyAttribute[prop] + '\"';\n      });\n      bodyAttribute = composition;\n    }\n    if (bodyAttribute.substr(0, 1) !== ' ') {\n      bodyAttribute = ' ' + bodyAttribute;\n    }\n    this.bodyAttributes.push(bodyAttribute);\n  }\n  getBodyAttributes() {\n    return this.bodyAttributes;\n  }\n  clearBodyAttributes() {\n    this.bodyAttributes = null;\n  }\n  /** overwrite the SOAP service endpoint address */\n  setEndpoint(endpoint) {\n    this.endpoint = endpoint;\n    this._initializeServices(endpoint);\n  }\n  /** description of services, ports and methods as a JavaScript object */\n  describe() {\n    return this.wsdl.describeServices();\n  }\n  /** use the specified security protocol */\n  setSecurity(security) {\n    this.security = security;\n  }\n  setSOAPAction(SOAPAction) {\n    this.SOAPAction = SOAPAction;\n  }\n  _initializeServices(endpoint) {\n    const definitions = this.wsdl.definitions;\n    const services = definitions.services;\n    for (const name in services) {\n      this[name] = this._defineService(services[name], endpoint);\n    }\n  }\n  _initializeOptions(options) {\n    this.streamAllowed = options.stream;\n    this.returnSaxStream = options.returnSaxStream;\n    this.normalizeNames = options.normalizeNames;\n    this.overridePromiseSuffix = options.overridePromiseSuffix || 'Async';\n    this.wsdl.options.attributesKey = options.attributesKey || 'attributes';\n    this.wsdl.options.envelopeKey = options.envelopeKey || 'soap';\n    this.wsdl.options.envelopeSoapUrl = options.envelopeSoapUrl || 'http://schemas.xmlsoap.org/soap/envelope/';\n    this.wsdl.options.preserveWhitespace = !!options.preserveWhitespace;\n    const igNs = options.ignoredNamespaces;\n    if (igNs !== undefined && typeof igNs === 'object') {\n      if ('override' in igNs) {\n        if (igNs.override === true) {\n          if (igNs.namespaces !== undefined) {\n            this.wsdl.options.ignoredNamespaces = igNs.namespaces;\n          }\n        }\n      }\n    }\n    if (options.overrideRootElement !== undefined) {\n      this.wsdl.options.overrideRootElement = options.overrideRootElement;\n    }\n    this.wsdl.options.forceSoap12Headers = !!options.forceSoap12Headers;\n  }\n  _defineService(service, endpoint) {\n    const ports = service.ports;\n    const def = {};\n    for (const name in ports) {\n      def[name] = this._definePort(ports[name], endpoint ? endpoint : ports[name].location);\n    }\n    return def;\n  }\n  _definePort(port, endpoint) {\n    const location = endpoint;\n    const binding = port.binding;\n    const methods = binding.methods;\n    const def = {};\n    for (const name in methods) {\n      def[name] = this._defineMethod(methods[name], location);\n      const methodName = this.normalizeNames ? name.replace(nonIdentifierChars, '_') : name;\n      this[methodName] = def[name];\n      if (!nonIdentifierChars.test(methodName)) {\n        const suffix = this.overridePromiseSuffix;\n        this[methodName + suffix] = this._promisifyMethod(def[name]);\n      }\n    }\n    return def;\n  }\n  _promisifyMethod(method) {\n    return (args, options, extraHeaders) => {\n      return new Promise((resolve, reject) => {\n        const callback = (err, result, rawResponse, soapHeader, rawRequest, mtomAttachments) => {\n          if (err) {\n            reject(err);\n          } else {\n            resolve([result, rawResponse, soapHeader, rawRequest, mtomAttachments]);\n          }\n        };\n        method(args, callback, options, extraHeaders);\n      });\n    };\n  }\n  _defineMethod(method, location) {\n    let temp;\n    return (args, callback, options, extraHeaders) => {\n      if (typeof args === 'function') {\n        callback = args;\n        args = {};\n      } else if (typeof options === 'function') {\n        temp = callback;\n        callback = options;\n        options = temp;\n      } else if (typeof extraHeaders === 'function') {\n        temp = callback;\n        callback = extraHeaders;\n        extraHeaders = options;\n        options = temp;\n      }\n      this._invoke(method, args, location, (error, result, rawResponse, soapHeader, rawRequest, mtomAttachments) => {\n        callback(error, result, rawResponse, soapHeader, rawRequest, mtomAttachments);\n      }, options, extraHeaders);\n    };\n  }\n  _processSoapHeader(soapHeader, name, namespace, xmlns) {\n    switch (typeof soapHeader) {\n      case 'object':\n        return this.wsdl.objectToXML(soapHeader, name, namespace, xmlns, true);\n      case 'function':\n        const _this = this;\n        // arrow function does not support arguments variable\n        // tslint:disable-next-line\n        return function () {\n          const result = soapHeader.apply(null, arguments);\n          if (typeof result === 'object') {\n            return _this.wsdl.objectToXML(result, name, namespace, xmlns, true);\n          } else {\n            return result;\n          }\n        };\n      default:\n        return soapHeader;\n    }\n  }\n  _invoke(method, args, location, callback, options, extraHeaders) {\n    const name = method.$name;\n    const input = method.input;\n    const output = method.output;\n    const style = method.style;\n    const defs = this.wsdl.definitions;\n    const envelopeKey = this.wsdl.options.envelopeKey;\n    const envelopeSoapUrl = this.wsdl.options.envelopeSoapUrl;\n    const ns = defs.$targetNamespace;\n    let encoding = '';\n    let message = '';\n    let xml = null;\n    let soapAction;\n    const alias = (0, utils_1.findPrefix)(defs.xmlns, ns);\n    let headers = {\n      'Content-Type': 'text/xml; charset=utf-8'\n    };\n    let xmlnsSoap = 'xmlns:' + envelopeKey + '=\"' + envelopeSoapUrl + '\"';\n    const finish = (obj, body, response) => {\n      let result;\n      if (!output) {\n        // one-way, no output expected\n        return callback(null, null, body, obj.Header, xml, response.mtomResponseAttachments);\n      }\n      // If it's not HTML and Soap Body is empty\n      if (!obj.html && !obj.Body) {\n        if (response.status >= 400) {\n          const error = new Error('Error http status codes');\n          error.response = response;\n          error.body = body;\n          this.emit('soapError', error, eid);\n          return callback(error, obj, body, obj.Header);\n        }\n        return callback(null, obj, body, obj.Header);\n      }\n      if (typeof obj.Body !== 'object') {\n        const error = new Error('Cannot parse response');\n        error.response = response;\n        error.body = body;\n        return callback(error, obj, body, undefined, xml);\n      }\n      result = obj.Body[output.$name];\n      // RPC/literal response body may contain elements with added suffixes I.E.\n      // 'Response', or 'Output', or 'Out'\n      // This doesn't necessarily equal the ouput message name. See WSDL 1.1 Section 2.4.5\n      if (!result) {\n        result = obj.Body[output.$name.replace(/(?:Out(?:put)?|Response)$/, '')];\n      }\n      if (!result) {\n        ['Response', 'Out', 'Output'].forEach(term => {\n          if (obj.Body.hasOwnProperty(name + term)) {\n            return result = obj.Body[name + term];\n          }\n        });\n      }\n      callback(null, result, body, obj.Header, xml, response.mtomResponseAttachments);\n    };\n    const parseSync = (body, response) => {\n      let obj;\n      try {\n        obj = this.wsdl.xmlToObject(body);\n      } catch (error) {\n        //  When the output element cannot be looked up in the wsdl and the body is JSON\n        //  instead of sending the error, we pass the body in the response.\n        if (!output || !output.$lookupTypes) {\n          debug('Response element is not present. Unable to convert response xml to json.');\n          //  If the response is JSON then return it as-is.\n          const json = _.isObject(body) ? body : tryJSONparse(body);\n          if (json) {\n            return callback(null, response, json, undefined, xml);\n          }\n        }\n        error.response = response;\n        error.body = body;\n        this.emit('soapError', error, eid);\n        return callback(error, response, body, undefined, xml, response.mtomResponseAttachments);\n      }\n      return finish(obj, body, response);\n    };\n    if (this.SOAPAction) {\n      soapAction = this.SOAPAction;\n    } else if (method.soapAction !== undefined && method.soapAction !== null) {\n      soapAction = method.soapAction;\n    } else {\n      soapAction = (ns.lastIndexOf('/') !== ns.length - 1 ? ns + '/' : ns) + name;\n    }\n    if (this.wsdl.options.forceSoap12Headers) {\n      headers['Content-Type'] = `application/soap+xml; charset=utf-8; action=\"${soapAction}\"`;\n      xmlnsSoap = 'xmlns:' + envelopeKey + '=\"http://www.w3.org/2003/05/soap-envelope\"';\n    } else {\n      headers.SOAPAction = '\"' + soapAction + '\"';\n    }\n    options = options || {};\n    // Allow the security object to add headers\n    if (this.security && this.security.addHeaders) {\n      this.security.addHeaders(headers);\n    }\n    if (this.security && this.security.addOptions) {\n      this.security.addOptions(options);\n    }\n    if (style === 'rpc' && (input.parts || input.name === 'element' || args === null)) {\n      assert.ok(!style || style === 'rpc', 'invalid message definition for document style binding');\n      message = this.wsdl.objectToRpcXML(name, args, alias, ns, input.name !== 'element');\n      method.inputSoap === 'encoded' && (encoding = 'soap:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" ');\n    } else {\n      assert.ok(!style || style === 'document', 'invalid message definition for rpc style binding');\n      // pass `input.$lookupType` if `input.$type` could not be found\n      message = this.wsdl.objectToDocumentXML(input.$name, args, input.targetNSAlias, input.targetNamespace, input.$type || input.$lookupType);\n    }\n    let decodedHeaders;\n    if (this.soapHeaders) {\n      decodedHeaders = this.soapHeaders.map(header => {\n        if (typeof header === 'function') {\n          return header(method, location, soapAction, args);\n        } else {\n          return header;\n        }\n      }).join(' ');\n    }\n    xml = '<?xml version=\"1.0\" encoding=\"utf-8\"?>' + '<' + envelopeKey + ':Envelope ' + xmlnsSoap + ' ' + 'xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" ' + encoding + this.wsdl.xmlnsInEnvelope + '>' + (decodedHeaders || this.security ? '<' + envelopeKey + ':Header' + (this.wsdl.xmlnsInHeader ? ' ' + this.wsdl.xmlnsInHeader : '') + '>' + (decodedHeaders ? decodedHeaders : '') + (this.security && !this.security.postProcess ? this.security.toXML() : '') + '</' + envelopeKey + ':Header>' : '') + '<' + envelopeKey + ':Body' + (this.bodyAttributes ? this.bodyAttributes.join(' ') : '') + '>' + message + '</' + envelopeKey + ':Body>' + '</' + envelopeKey + ':Envelope>';\n    if (this.security && this.security.postProcess) {\n      xml = this.security.postProcess(xml, envelopeKey);\n    }\n    if (options && options.postProcess) {\n      xml = options.postProcess(xml);\n    }\n    this.lastMessage = message;\n    this.lastRequest = xml;\n    this.lastEndpoint = location;\n    const eid = options.exchangeId || (0, crypto_1.randomUUID)();\n    this.emit('message', message, eid);\n    this.emit('request', xml, eid);\n    // Add extra headers\n    if (this.httpHeaders === null) {\n      headers = {};\n    } else {\n      for (const header in this.httpHeaders) {\n        headers[header] = this.httpHeaders[header];\n      }\n      for (const attr in extraHeaders) {\n        headers[attr] = extraHeaders[attr];\n      }\n    }\n    const tryJSONparse = body => {\n      try {\n        return JSON.parse(body);\n      } catch (err) {\n        return undefined;\n      }\n    };\n    if (this.streamAllowed && typeof this.httpClient.requestStream === 'function') {\n      callback = _.once(callback);\n      const startTime = Date.now();\n      const onError = err => {\n        this.lastResponse = null;\n        this.lastResponseHeaders = null;\n        this.lastElapsedTime = null;\n        this.lastRequestHeaders = err.config && err.config.headers;\n        this.emit('response', null, null, eid);\n        if (this.returnSaxStream || !err.response || !err.response.data) {\n          callback(err, undefined, undefined, undefined, xml);\n        } else {\n          err.response.data.on('close', e => {\n            callback(err, undefined, undefined, undefined, xml);\n          });\n          err.response.data.on('data', e => {\n            err.response.data = e.toString();\n          });\n        }\n      };\n      this.httpClient.requestStream(location, xml, headers, options, this).then(res => {\n        this.lastRequestHeaders = res.headers;\n        if (res.data.on) {\n          res.data.on('error', err => onError(err));\n        }\n        // When the output element cannot be looked up in the wsdl,\n        // play it safe and don't stream\n        if (res.status !== 200 || !output || !output.$lookupTypes) {\n          getStream(res.data).then(body => {\n            this.lastResponse = body;\n            this.lastElapsedTime = Date.now() - startTime;\n            this.lastResponseHeaders = res && res.headers;\n            // Added mostly for testability, but possibly useful for debugging\n            this.lastRequestHeaders = res.config && res.config.headers || res.headers;\n            this.emit('response', body, res, eid);\n            return parseSync(body, res);\n          });\n          return;\n        }\n        if (this.returnSaxStream) {\n          // directly return the saxStream allowing the end user to define\n          // the parsing logics and corresponding errors managements\n          const saxStream = this.wsdl.getSaxStream(res.data);\n          return finish({\n            saxStream\n          }, '<stream>', res.data);\n        } else {\n          this.wsdl.xmlToObject(res.data, (error, obj) => {\n            this.lastResponse = res;\n            this.lastElapsedTime = Date.now() - startTime;\n            this.lastResponseHeaders = res && res.headers;\n            // Added mostly for testability, but possibly useful for debugging\n            this.lastRequestHeaders = res.config.headers;\n            this.emit('response', '<stream>', res.data, eid);\n            if (error) {\n              error.response = res;\n              error.body = '<stream>';\n              this.emit('soapError', error, eid);\n              return callback(error, res, undefined, undefined, xml);\n            }\n            return finish(obj, '<stream>', res);\n          });\n        }\n      }, onError);\n      return;\n    }\n    const startTime = Date.now();\n    return this.httpClient.request(location, xml, (err, response, body) => {\n      this.lastResponse = body;\n      if (response) {\n        this.lastResponseHeaders = response.headers;\n        this.lastElapsedTime = Date.now() - startTime;\n        this.lastResponseAttachments = response.mtomResponseAttachments;\n        // Added mostly for testability, but possibly useful for debugging\n        this.lastRequestHeaders = response.config && response.config.headers;\n      }\n      this.emit('response', body, response, eid);\n      if (err) {\n        this.lastRequestHeaders = err.config && err.config.headers;\n        try {\n          if (err.response && err.response.data) {\n            this.wsdl.xmlToObject(err.response.data);\n          }\n        } catch (error) {\n          err.root = error.root || error;\n        }\n        callback(err, undefined, undefined, undefined, xml);\n      } else {\n        return parseSync(body, response);\n      }\n    }, headers, options, this);\n  }\n}\nexports.Client = Client;","map":{"version":3,"names":["assert","require","crypto_1","debug_1","events_1","getStream","_","http_1","utils_1","debug","default","nonIdentifierChars","Client","EventEmitter","constructor","wsdl","endpoint","options","_initializeOptions","_initializeServices","httpClient","HttpClient","addSoapHeader","soapHeader","name","namespace","xmlns","soapHeaders","_processSoapHeader","push","changeSoapHeader","index","getSoapHeaders","clearSoapHeaders","addHttpHeader","value","httpHeaders","getHttpHeaders","clearHttpHeaders","addBodyAttribute","bodyAttribute","bodyAttributes","composition","Object","getOwnPropertyNames","forEach","prop","idx","array","substr","getBodyAttributes","clearBodyAttributes","setEndpoint","describe","describeServices","setSecurity","security","setSOAPAction","SOAPAction","definitions","services","_defineService","streamAllowed","stream","returnSaxStream","normalizeNames","overridePromiseSuffix","attributesKey","envelopeKey","envelopeSoapUrl","preserveWhitespace","igNs","ignoredNamespaces","undefined","override","namespaces","overrideRootElement","forceSoap12Headers","service","ports","def","_definePort","location","port","binding","methods","_defineMethod","methodName","replace","test","suffix","_promisifyMethod","method","args","extraHeaders","Promise","resolve","reject","callback","err","result","rawResponse","rawRequest","mtomAttachments","temp","_invoke","error","objectToXML","_this","apply","arguments","$name","input","output","style","defs","ns","$targetNamespace","encoding","message","xml","soapAction","alias","findPrefix","headers","xmlnsSoap","finish","obj","body","response","Header","mtomResponseAttachments","html","Body","status","Error","emit","eid","term","hasOwnProperty","parseSync","xmlToObject","$lookupTypes","json","isObject","tryJSONparse","lastIndexOf","length","addHeaders","addOptions","parts","ok","objectToRpcXML","inputSoap","objectToDocumentXML","targetNSAlias","targetNamespace","$type","$lookupType","decodedHeaders","map","header","join","xmlnsInEnvelope","xmlnsInHeader","postProcess","toXML","lastMessage","lastRequest","lastEndpoint","exchangeId","randomUUID","attr","JSON","parse","requestStream","once","startTime","Date","now","onError","lastResponse","lastResponseHeaders","lastElapsedTime","lastRequestHeaders","config","data","on","e","toString","then","res","saxStream","getSaxStream","request","lastResponseAttachments","root","exports"],"sources":["../src/client.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}