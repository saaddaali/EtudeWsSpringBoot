{"ast":null,"code":"\"use strict\";\n\n/*\n * Copyright (c) 2011 Vinay Pulim <vinay@milewise.com>\n * MIT Licensed\n */\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __exportStar = this && this.__exportStar || function (m, exports) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.listen = exports.createClientAsync = exports.createClient = exports.WSDL = exports.passwordDigest = exports.Server = exports.WSSecurityCertWithToken = exports.WSSecurityPlusCert = exports.WSSecurityCert = exports.WSSecurity = exports.NTLMSecurity = exports.ClientSSLSecurityPFX = exports.ClientSSLSecurity = exports.BearerSecurity = exports.BasicAuthSecurity = exports.HttpClient = exports.Client = exports.security = void 0;\nconst debug_1 = require(\"debug\");\nconst client_1 = require(\"./client\");\nconst _security = require(\"./security\");\nconst server_1 = require(\"./server\");\nconst utils_1 = require(\"./utils\");\nconst wsdl_1 = require(\"./wsdl\");\nconst debug = (0, debug_1.default)('node-soap:soap');\nexports.security = _security;\nvar client_2 = require(\"./client\");\nObject.defineProperty(exports, \"Client\", {\n  enumerable: true,\n  get: function () {\n    return client_2.Client;\n  }\n});\nvar http_1 = require(\"./http\");\nObject.defineProperty(exports, \"HttpClient\", {\n  enumerable: true,\n  get: function () {\n    return http_1.HttpClient;\n  }\n});\nvar security_1 = require(\"./security\");\nObject.defineProperty(exports, \"BasicAuthSecurity\", {\n  enumerable: true,\n  get: function () {\n    return security_1.BasicAuthSecurity;\n  }\n});\nObject.defineProperty(exports, \"BearerSecurity\", {\n  enumerable: true,\n  get: function () {\n    return security_1.BearerSecurity;\n  }\n});\nObject.defineProperty(exports, \"ClientSSLSecurity\", {\n  enumerable: true,\n  get: function () {\n    return security_1.ClientSSLSecurity;\n  }\n});\nObject.defineProperty(exports, \"ClientSSLSecurityPFX\", {\n  enumerable: true,\n  get: function () {\n    return security_1.ClientSSLSecurityPFX;\n  }\n});\nObject.defineProperty(exports, \"NTLMSecurity\", {\n  enumerable: true,\n  get: function () {\n    return security_1.NTLMSecurity;\n  }\n});\nObject.defineProperty(exports, \"WSSecurity\", {\n  enumerable: true,\n  get: function () {\n    return security_1.WSSecurity;\n  }\n});\nObject.defineProperty(exports, \"WSSecurityCert\", {\n  enumerable: true,\n  get: function () {\n    return security_1.WSSecurityCert;\n  }\n});\nObject.defineProperty(exports, \"WSSecurityPlusCert\", {\n  enumerable: true,\n  get: function () {\n    return security_1.WSSecurityPlusCert;\n  }\n});\nObject.defineProperty(exports, \"WSSecurityCertWithToken\", {\n  enumerable: true,\n  get: function () {\n    return security_1.WSSecurityCertWithToken;\n  }\n});\nvar server_2 = require(\"./server\");\nObject.defineProperty(exports, \"Server\", {\n  enumerable: true,\n  get: function () {\n    return server_2.Server;\n  }\n});\nvar utils_2 = require(\"./utils\");\nObject.defineProperty(exports, \"passwordDigest\", {\n  enumerable: true,\n  get: function () {\n    return utils_2.passwordDigest;\n  }\n});\n__exportStar(require(\"./types\"), exports);\nvar wsdl_2 = require(\"./wsdl\");\nObject.defineProperty(exports, \"WSDL\", {\n  enumerable: true,\n  get: function () {\n    return wsdl_2.WSDL;\n  }\n});\nfunction getFromCache(key, cache, load, callback) {\n  if (!cache.has(key)) {\n    load((err, result) => {\n      if (err) {\n        return callback(err);\n      }\n      cache.set(key, result);\n      callback(null, result);\n    });\n  } else {\n    process.nextTick(() => {\n      callback(null, cache.get(key));\n    });\n  }\n}\nfunction _requestWSDL(url, options, callback) {\n  if (typeof options === 'function') {\n    callback = options;\n    options = {};\n  }\n  const openWsdl = callback => {\n    (0, wsdl_1.open_wsdl)(url, options, callback);\n  };\n  if (options.disableCache === true) {\n    openWsdl(callback);\n  } else {\n    let cache;\n    if (options.wsdlCache) {\n      cache = options.wsdlCache;\n    } else {\n      cache = utils_1.wsdlCacheSingleton;\n    }\n    getFromCache(url, cache, openWsdl, callback);\n  }\n}\nfunction createClient(url, p2, p3, p4) {\n  let endpoint = p4;\n  let callback;\n  let options;\n  if (typeof p2 === 'function') {\n    callback = p2;\n    endpoint = p3;\n    options = {};\n  } else if (typeof p3 === 'function') {\n    options = p2;\n    callback = p3;\n    endpoint = p4;\n  }\n  endpoint = options.endpoint || endpoint;\n  _requestWSDL(url, options, (err, wsdl) => {\n    callback(err, wsdl && new client_1.Client(wsdl, endpoint, options));\n  });\n}\nexports.createClient = createClient;\nfunction createClientAsync(url, options, endpoint) {\n  if (typeof options === 'undefined') {\n    options = {};\n  }\n  return new Promise((resolve, reject) => {\n    createClient(url, options, (err, client) => {\n      if (err) {\n        reject(err);\n      }\n      resolve(client);\n    }, endpoint);\n  });\n}\nexports.createClientAsync = createClientAsync;\nfunction listen(server, p2, services, xml, callback) {\n  let options;\n  let path;\n  let uri = '';\n  if (typeof p2 === 'object' && !(p2 instanceof RegExp)) {\n    // p2 is options\n    // server, options\n    options = p2;\n    path = options.path;\n    services = options.services;\n    xml = options.xml;\n    uri = options.uri;\n  } else {\n    // p2 is path\n    // server, path, services, wsdl\n    path = p2;\n    options = {\n      path: p2,\n      services: services,\n      callback: callback\n    };\n  }\n  const wsdl = new wsdl_1.WSDL(xml || services, uri, options);\n  return new server_1.Server(server, path, services, wsdl, options);\n}\nexports.listen = listen;","map":{"version":3,"names":["debug_1","require","client_1","_security","server_1","utils_1","wsdl_1","debug","default","exports","security","client_2","Object","defineProperty","enumerable","get","Client","http_1","HttpClient","security_1","BasicAuthSecurity","BearerSecurity","ClientSSLSecurity","ClientSSLSecurityPFX","NTLMSecurity","WSSecurity","WSSecurityCert","WSSecurityPlusCert","WSSecurityCertWithToken","server_2","Server","utils_2","passwordDigest","__exportStar","wsdl_2","WSDL","getFromCache","key","cache","load","callback","has","err","result","set","process","nextTick","_requestWSDL","url","options","openWsdl","open_wsdl","disableCache","wsdlCache","wsdlCacheSingleton","createClient","p2","p3","p4","endpoint","wsdl","createClientAsync","Promise","resolve","reject","client","listen","server","services","xml","path","uri","RegExp"],"sources":["../src/soap.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}